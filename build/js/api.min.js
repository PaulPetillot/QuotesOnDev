!function(e){e(function(){let t="";e(".new-quote-button").on("click",function(o){o.preventDefault(),t=document.URL;let n=e(".description"),a=e(".metah2"),r=e(".author-name");e.ajax({method:"GET",url:api_vars.root_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1",cache:!1}).done(function(e){const t=e.shift(),o=t._qod_quote_source,u=t._qod_quote_source_url,l=t.title.rendered,i=t.excerpt.rendered,s=t.link;n.html(i),o.length>0&&u.length>0?a.html('<a href="'+u+'">'+o+"</a>"):o.lenght>0?a.html('<a href="">'+o+"</a>"):a.html('<a href=""></a>'),r.html(l),history.pushState(null,null,s)})}),e(window).on("popstate",function(){window.location.replace(t)})}),e(function(){let t=e(".submit-form");t.on("submit",function(o){o.preventDefault();let n=e(".message-receive");n.empty();let a={title:e("#author-name-field").val(),content:e("#quote-content-field").val(),_qod_quote_source:e("#quote-source-field").val(),_qod_quote_source_url:e("#quote-url-field").val(),post_status:"pending"};e.ajax({method:"POST",url:api_vars.root_url+"wp/v2/posts",data:a,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.nonce)}}).done(function(){o.preventDefault(),t.css("display","none"),n.text(api_vars.success)}).fail(function(){n.text(api_vars.failure)})})})}(jQuery);